"use strict";!function($){function _createTable(e,a,n,t,r,p,d,l){e.html("");var s=jQuery("<table>",{class:n}),o=jQuery("<thead>"),i=jQuery("<tr>"),u=jQuery("<tbody>");s.append(o.append(i),u);var y=new Array,c=new Array;for(var g in a){var v=a[g];y.push(v.key),c.push(v.type);var h=jQuery("<th>",{text:v.header,style:"width:"+columnSize});i.append(h)}var f;0!=r.length&&(f=jQuery("<th>",{style:"width:"+processColumnSize}),i.append(f));for(var g in t){for(var b=jQuery("<tr>"),j=t[g],Q=0;Q<y.length;Q++){var m=y[Q],_=c[Q];if(m.includes(".")){P=_resolveKeys(j,""+m);"date"==_?P=kendo.toString(new Date(P),"dd/MM/yyyy"):"datetime"==_&&(P=kendo.toString(new Date(P),"dd/MM/yyyy HH:mm:ss"));w=jQuery("<td>",{text:P,style:"width:"+columnSize});b.append(w)}else{var P=j[m];"date"==_?P=kendo.toString(new Date(P),"dd/MM/yyyy"):"datetime"==_&&(P=kendo.toString(new Date(P),"dd/MM/yyyy HH:mm:ss"));var w=jQuery("<td>",{text:P});b.append(w)}}var k=jQuery("<div>",{class:"btn-group",role:"group",style:"width:100%"});for(var g in r){var x,D=r[g],S=D.handlers;if(D.datatoggle&&D.ariahaspopup&&D.ariaepanded){var T=jQuery("<ul>",{class:"dropdown-menu"});x=jQuery("<div>",{style:"width:"+commandSize,class:"btn-group",role:"group"});var K=jQuery("<a>",{class:D.class,"data-key":_resolveKeys(j,""+D.dataKey),"data-toggle":D.datatoggle,style:"width:100%;","aria-haspopup":D.ariahaspopup,"aria-epanded":D.ariaepanded}),z=jQuery("<span>",{class:"caret"}),C=jQuery("<text>",{text:D.text});K.append(z,C);for(var Q in D.selections){var M=jQuery("<li>"),E=jQuery("<a>",{dropDownID:Q,text:D.selections[Q]});T.append(M.append(E))}x.append(K,T),r.length>1?b.append(k.append(x)):b.append(x.append)}else{x=jQuery("<a>",{class:D.class,"data-key":_resolveKeys(j,""+D.dataKey),style:"width:"+commandSize});var O=jQuery("<i>",{class:D.fontIcon,"data-key":_resolveKeys(j,""+D.dataKey)}),H=jQuery("<span>",{text:" "+D.text,"data-key":_resolveKeys(j,""+D.dataKey)});r.length>1?b.append(k.append(x.append(O,H))):b.append(x.append(O,H))}for(var Q in S){var A=Q,I=S[Q];x.bind(A,I)}}u.append(b)}var B;p&&(B=jQuery("<div>",{class:"table-responsive"}));var L,R,$,q,F,G;null!=l?(L=jQuery("<div>",{class:"panel "+l.class}),R=jQuery("<div>",{class:"panel-heading"}),$=jQuery("<div>",{class:"panel-title"}),q=jQuery("<i>",{class:l.fontIcon}),F=jQuery("<span>",{text:l.header}),G=jQuery("<div>",{class:"panel-body",style:"height: "+l.height+"px; overflow:auto; padding: 5px;"}),L.append(R.append($.append(q,F)))):G=jQuery("<div>",{class:"panel-body",style:"padding: 5px;"});var J;null!=d&&_addPagination(J=jQuery("<div>",{class:"panel-footer"}),d.createPagination()),p?null!=l?null!=d?e.append(L.append(G.append(B.append(s)),J)):e.append(L.append(G.append(B.append(s)))):null!=d?e.append(G.append(B.append(s)),J):e.append(G.append(B.append(s))):null!=l?null!=d?e.append(L.append(G.append(s),J)):e.append(L.append(G.append(s))):null!=d?e.append(G.append(s),J):e.append(G.append(s))}function _resolveKeys(dataElement,keys){try{return eval("dataElement."+keys)}catch(e){return}}function _refreshTable(e,a){e.unbind("refresh"),e.bind("refresh",{context:e,options:a},_onRefresh)}function _onRefresh(e){var a=e.data.context,n=e.data.options,t=n.columns,r=n.class,p=n.datasource,d=n.commands,l=n.responsive,s=n.pagination,o=n.panel,i=p.action();i.success(function(e){globalOptions=n,s.setDataLength(e.length),_createTable(a,t,r,_getPagedData(s,e),d,l,s,o),_refreshTable(a,globalOptions),s._onPageButtonClickCallback=function(n){_createTable(a,t,r,_getPagedData(n,e),d,l,s,o),_refreshTable(a,globalOptions)}}),i.error(function(e){console.log(e)})}function _addPagination(e,a){e.append(a)}function _getPagedData(e,a){for(var n=new Array,t=e.getEntryPerPage()*e.getCurrentPage()-e.getEntryPerPage();t<e.getEntryPerPage()*e.getCurrentPage();t++)if(void 0!==a[t]){var r=a[t];n.push(r)}return n}var globalOptions,globalElement,columnSize,commandSize,processColumnSize;$.fn.flyDataTable=function(e){var a=globalElement=this,n=e.columns,t=e.class,r=e.datasource,p=e.commands,d=e.responsive,l=e.pagination,s=e.panel,o=r.action();o.success(function(r){globalOptions=e,l.setDataLength(r.length),_createTable(a,n,t,_getPagedData(l,r),p,d,l,s),_refreshTable(a,globalOptions),l._onPageButtonClickCallback=function(e){_createTable(a,n,t,_getPagedData(e,r),p,d,l,s),_refreshTable(a,globalOptions)}}),o.error(function(e){console.log(e)})}}(jQuery);